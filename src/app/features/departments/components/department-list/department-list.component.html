<app-breadcrumb
  [title]="'DEPARTMENTS_LIST' | translate"
  [items]="['DEPARTMENTS' | translate]"
  [active_item]="'DEPARTMENTS_LIST' | translate"
></app-breadcrumb>
<div class="container-fluid user-card">
  <div class="row">
    <div class="col-sm-12 mb-5" style="z-index:1;" *ngIf="AuthUser.login == true && AuthUser.New == true">
      <button class="btn btn-primary text-center"
      [routerLink]="['/departments/details', 0]" [queryParams]="{mode: 'new'}" type="submit">
        {{ 'ADD_DEPARTMENT' | translate }}
      </button>
    </div>

    <ng-container  *ngIf="AuthUser.login == true ">
      <div class="h-100 w-100  position-absolute  d-flex align-items-center" style="z-index:0;">
        <app-spinner *ngIf="loading" class="d-block mx-auto"></app-spinner>
      </div>
    <ng-container *ngFor="let Department of Departments">
      <div class="col-md-6 col-lg-6 col-xl-4 box-col-4" *ngIf="!loading">
        <div class="card custom-card">
          <div class="text-center profile-details">

                <h6>{{"NAME" |translate}} : {{Department.name}}</h6>
                <h6> {{"USER_NAME" |translate}} : {{Department.UserName}}</h6>
                <p >
                  {{"DATE_OF_REGISTER" | translate}} :
                  {{Department.RegisterDateTime | date:'short'}}
                </p>
          </div>

          <div class="row actions gap-2 justify-content-between">
            <button class="col-5 btn btn-primary"    *ngIf="AuthUser.login == true"
            [ngClass]="{'w-100': !AuthUser.edit}"
            [routerLink]="['/departments/details', Department.Id]" [queryParams]="{mode: 'view'}" type="button">
              {{ 'DETAILS' | translate}}
            </button>
            <button class="col-5 btn btn-dark"  *ngIf="AuthUser.edit == true"  [ngClass]="{'w-100': !AuthUser.login}"
            [routerLink]="['/departments/details', Department.Id]" [queryParams]="{mode: 'edit'}"  type="button">
              {{ 'EDIT' | translate}}
            </button>

          </div>
          <div class="row actions gap-2 pb-0">

            <button class="col btn btn-danger btn-air-danger" type="button"
            *ngIf="AuthUser.delete == true"
             (click)="remove(Department.Id)">
              {{ 'DELETE' | translate}}
            </button>
          </div>
        </div>
      </div>
    </ng-container>
    </ng-container>
   <ng-container   *ngIf="AuthUser.login == false ">
    <div class="col-sm-12">
      <div class="card">
          <div class="card-body d-flex align-items-center justify-content-center"
            style="min-height: 300px;">
            <h4 class="text-center fw-bold"> {{"NOT_AUTH" |translate}}</h4>
          </div>
      </div>
    </div>
  </ng-container>
  </div>
</div>